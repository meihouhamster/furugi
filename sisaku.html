<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-firestore.js"></script>
  <title>vouch</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: black;
      color: #fff;
    }
    .buttons-container {
      display: flex;
      flex-wrap: wrap; /* ボタンが行を超えたら折り返す */
      max-height: 1000px; /* 表示領域の最大高さ */
    }

    .button-row {
      display: flex;
      padding: 10px; /* 上部の余白を追加 */
      overflow-x: auto; /* 横スクロール可能にする */
      overflow-y: hidden;
    }
    .button-high {
        display: flex;
        padding: 10px;
    }
    .button-high button {
      width: 204px;
      cursor: pointer;
      background-color: rgb(113, 113, 113);
    }
    .button-row button {
      display: inline-block;
      white-space: nowrap;
            width: 50px; /* 幅を指定 */
            height: 50px; /* 高さを指定 */
            font-size: 5px;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
            border-radius: 50%; /* ボタンを丸くするための設定 */
            background-color: rgb(113, 113, 113); /* ボタンの背景色 */
            color: black; /* ボタンのテキスト色 */
            border: none; /* ボタンのボーダーをなくす */
            padding: 50px; /* パディングをなくす */
            margin: 20px; /* 余白を調整 */
            text-indent: -30px;
            line-height: 5px;
    }
    
    

        .search-container {
            display: flex;
            align-items: center;
        }

        .search-text {
            margin-right: 10px;
        }

        /* 検索フォームのスタイル（適宜調整） */
        form {
            margin: 0;
            padding-left: 40px;
        }

        label {
            font-weight: bold;
        }

        input[type="text"] {
            padding: 5px;
        }

        input[type="submit"] {
            padding: 5px 10px;
            background-color: #ffbb00;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        .rogin{
          margin-left: 1000px;
        }
        a {
          color: inherit;
          text-decoration: none;
          text-decoration-line: underline;
        }
        #products-list {
        list-style-type: none;
        display: flex;
        flex-wrap: wrap; /* 画面からはみ出たら下の行に折り返す */
        gap: 10px; /* 画像間のマージン */
    }

    #products-list li {
        flex: 0 0 calc(20% - 10px); /* 3列に分割し、マージンを考慮 */
        box-sizing: border-box;
    }

    #products-list img {
        width: 100%; /* 親要素の幅いっぱいに広げる */
        height: auto; /* 高さは自動調整 */
        cursor: pointer; /* カーソルをポインターに変更 */
    }
    h1 {
      display: inline-block;
      background-image: linear-gradient(to right, rgb(255, 251, 0), rgb(255, 208, 0), rgb(255, 153, 0), rgb(255, 129, 2), rgb(255, 81, 0), rgb(255, 51, 0), red);
      -webkit-background-clip: text;
      color: transparent;
    }
          
  </style>
</head>
<body>
 <!-- 検索エンジンとテキストのコンテナ -->
 <div class="search-container">
  <h1>vouch</h1>

  <!-- 検索フォーム -->
  <form id="searchForm">
    <input type="text" id="search" name="q" placeholder="キーワードを入力">
    <input type="submit" value="検索">
</form>
  <div class="rogin"><a href="./test2.html">マイページ</a></div>
</div>
<div class="buttons-container">
  <div class="button-high">
    <button>トップス</button>
    <button>ジャケット/アウター</button>
    <button>パンツ</button>
    <button>ルームウェア/パジャマ</button>
    <button>スーツ/フォーマル/ドレス</button>
    <button>レッグウェア</button>
    <button>アンダーウェア</button>
  </div>
  <div class="button-row">
    <button>NIKE</button>
    <button>adidas</button>
    <button>GU</button>
    <button>UNIQULO</button>
    <button>DELL</button>
    <button>H&M</button>
    <button>ZARA</button>
    <button>Champion</button>
    <button>Levi's</button>
    <button>FORTRAN</button>
    <button>WEGO</button>
    <button>Right-on</button>
    <button>BEAMS</button>
    <button>The North Face</button>
    <button>montbell</button>
    <button>Patagonia</button>
    <button>GAP</button>
    <button>Apple</button>
    <button>ボタン19</button>
    <button>ボタン20</button>
  </div>
</div>
<ul id="products-list"></ul>

<script>
    // Firebaseの初期化
    var firebaseConfig = {
        apiKey: "AIzaSyDKfERS_ATIs-ueIT8NMQuhazBx-uCl5WU",
        authDomain: "vouch-1c4b7.firebaseapp.com",
        projectId: "vouch-1c4b7",
        storageBucket: "vouch-1c4b7.appspot.com",
        messagingSenderId: "802519104562",
        appId: "1:802519104562:web:9f76e8fa1e44d84342d02b",
        measurementId: "G-JLT83S58PD"
    };

    firebase.initializeApp(firebaseConfig);

// Firestoreの参照
var db = firebase.firestore();

// "products"コレクションからデータを取得
db.collection("products").get().then((querySnapshot) => {
    // 取得したデータを処理
    querySnapshot.forEach((doc) => {
        // 各ドキュメントのデータを取得
        var productData = doc.data();

        // URLを取得
        var imageURL = productData.URL;

        // 取得したデータをHTMLに表示
        displayProduct(imageURL, productData);
    });
});

function displayProduct(imageURL, productData) {
    // 新しいリストアイテムを作成
    var listItem = document.createElement("li");

    // 新しいイメージ要素を作成
    var imageElement = document.createElement("img");

    // イメージ要素のsrc属性にURLを設定
    imageElement.src = imageURL;

    // イメージ要素をリストアイテムに追加
    listItem.appendChild(imageElement);

    // リストアイテムをul要素に追加
    document.getElementById("products-list").appendChild(listItem);

    // イメージがクリックされたときのイベントリスナーを追加
    imageElement.addEventListener("click", function () {
        // "product.html" に遷移する
        window.location.href = "product.html?imageURL=" + encodeURIComponent(imageURL) +
            "&productName=" + encodeURIComponent(productData.title) +
            "&value=" + encodeURIComponent(productData.value) +
            "&brand=" + encodeURIComponent(productData.brand) +
            "&category=" + encodeURIComponent(productData.category) +
            "&info=" + encodeURIComponent(productData.info) +
            "&quality=" + encodeURIComponent(productData.quality) +
            "&seller=" + encodeURIComponent(productData.seller) +
            "&size=" + encodeURIComponent(productData.size) +
            "&time=" + encodeURIComponent(productData.time.toDate()); // timestampをDateに変換
    });
}

// ボタン要素を取得
var buttons = document.querySelectorAll('.button-row button');

// 各ボタンにクリックイベントを追加
buttons.forEach(function(button) {
    button.addEventListener('click', function() {
        var selectedBrand = this.textContent; // ボタンのテキストがbrandの値として使用されると仮定

        // 画像リストをリセット
        document.getElementById("products-list").innerHTML = "";

        // "products"コレクションから特定のbrandのデータを取得
        db.collection("products").where("brand", "==", selectedBrand).get().then((querySnapshot) => {
            // 取得したデータを処理
            querySnapshot.forEach((doc) => {
                // 各ドキュメントのデータを取得
                var productData = doc.data();

                // URLを取得
                var imageURL = productData.URL;

                // 取得したデータをHTMLに表示
                displayProduct(imageURL, productData);
            });
        });
    });
});
// フォーム要素を取得
var searchForm = document.getElementById('searchForm');

// フォームが送信されたときのイベントリスナーを追加
searchForm.addEventListener('submit', function(event) {
    event.preventDefault(); // デフォルトのフォーム送信を防ぐ

    var searchTerm = document.getElementById('search').value.toLowerCase();

    // 画像リストをリセット
    document.getElementById("products-list").innerHTML = "";

    // "products"コレクションから部分一致するtitleのデータを取得
    db.collection("products").get().then((querySnapshot) => {
        // 取得したデータを処理
        querySnapshot.forEach((doc) => {
            // 各ドキュメントのデータを取得
            var productData = doc.data();

            // titleを小文字に変換してから検索
            var title = productData.title.toLowerCase();
            
            // 入力されたキーワードがtitleに含まれるか検証
            if (title.includes(searchTerm)) {
                // URLを取得
                var imageURL = productData.URL;

                // 取得したデータをHTMLに表示
                displayProduct(imageURL, productData);
            }
        });
    });
});
// ボタン要素を取得（button-highのボタン）
var highButtons = document.querySelectorAll('.button-high button');

// 各ボタンにクリックイベントを追加
highButtons.forEach(function (button) {
  button.addEventListener('click', function () {
    var selectedCategory = this.textContent; // ボタンのテキストがcategoryの値として使用されると仮定

    // 画像リストをリセット
    document.getElementById("products-list").innerHTML = "";

    // "products"コレクションから特定のcategoryのデータを取得
    db.collection("products").where("category", "==", selectedCategory).get().then((querySnapshot) => {
      // 取得したデータを処理
      querySnapshot.forEach((doc) => {
        // 各ドキュメントのデータを取得
        var productData = doc.data();

        // URLを取得
        var imageURL = productData.URL;

        // 取得したデータをHTMLに表示
        displayProduct(imageURL, productData);
      });
    });
  });
});






</script>



</body>
</html>
